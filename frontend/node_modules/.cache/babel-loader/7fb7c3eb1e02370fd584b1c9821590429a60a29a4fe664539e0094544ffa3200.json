{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nexport default {\n  name: 'TechnicianDashboard',\n  data() {\n    return {\n      user: {},\n      activeTab: 'overview',\n      showUserMenu: false,\n      taskFilter: '',\n      allTasks: [],\n      statistics: {\n        totalTasks: 0,\n        completedTasks: 0,\n        pendingTasks: 0,\n        averageRating: 0\n      },\n      earnings: {\n        monthly: 0,\n        total: 0,\n        averagePerTask: 0\n      },\n      profileForm: {}\n    };\n  },\n  computed: {\n    pendingTasks() {\n      return this.allTasks.filter(task => task.status === 'PENDING' || task.status === 'IN_PROGRESS');\n    },\n    completedTasks() {\n      return this.allTasks.filter(task => task.status === 'COMPLETED');\n    },\n    filteredTasks() {\n      if (!this.taskFilter) return this.allTasks;\n      return this.allTasks.filter(task => task.status === this.taskFilter);\n    }\n  },\n  created() {\n    this.loadUserInfo();\n    this.loadData();\n  },\n  methods: {\n    loadUserInfo() {\n      const userData = localStorage.getItem('user');\n      if (userData) {\n        this.user = JSON.parse(userData);\n        this.profileForm = {\n          ...this.user\n        };\n      }\n    },\n    async loadData() {\n      try {\n        await Promise.all([this.loadTasks(), this.loadStatistics(), this.loadEarnings()]);\n      } catch (error) {\n        console.error('加载数据失败:', error);\n        this.$emit('message', '加载数据失败', 'error');\n      }\n    },\n    async loadTasks() {\n      // 模拟加载任务数据\n      this.allTasks = [{\n        id: 1,\n        description: '发动机异响检修',\n        vehiclePlate: '京A12345',\n        status: 'PENDING',\n        startDate: '2024-12-20',\n        estimatedCost: 800\n      }];\n    },\n    async loadStatistics() {\n      this.statistics = {\n        totalTasks: 25,\n        completedTasks: 20,\n        pendingTasks: 3,\n        averageRating: 4.8\n      };\n    },\n    async loadEarnings() {\n      this.earnings = {\n        monthly: 8500,\n        total: 25600,\n        averagePerTask: 450\n      };\n    },\n    toggleUserMenu() {\n      this.showUserMenu = !this.showUserMenu;\n    },\n    getSkillTypeName(skillType) {\n      const skillMap = {\n        'MECHANIC': '机械维修',\n        'ELECTRICIAN': '电气维修',\n        'BODY_WORK': '车身维修',\n        'PAINT': '喷漆',\n        'DIAGNOSTIC': '诊断'\n      };\n      return skillMap[skillType] || skillType;\n    },\n    getStatusText(status) {\n      const statusMap = {\n        'PENDING': '待处理',\n        'IN_PROGRESS': '进行中',\n        'COMPLETED': '已完成',\n        'CANCELLED': '已取消'\n      };\n      return statusMap[status] || status;\n    },\n    formatDate(dateString) {\n      return new Date(dateString).toLocaleDateString('zh-CN');\n    },\n    calculateDuration(startDate, endDate) {\n      const start = new Date(startDate);\n      const end = new Date(endDate);\n      const days = Math.ceil((end - start) / (1000 * 60 * 60 * 24));\n      return `${days}天`;\n    },\n    startTask(task) {\n      this.$emit('message', '开始任务功能开发中', 'info');\n    },\n    completeTask(task) {\n      this.$emit('message', '完成任务功能开发中', 'info');\n    },\n    viewTask(task) {\n      this.$emit('message', '查看任务功能开发中', 'info');\n    },\n    viewTaskDetail(task) {\n      this.$emit('message', '查看详情功能开发中', 'info');\n    },\n    async updateProfile() {\n      try {\n        // 构建完整的技师更新请求数据\n        const updateData = {\n          name: this.profileForm.name,\n          employeeId: this.user.employeeId,\n          // 保持原员工ID\n          username: this.user.username,\n          // 保持原用户名\n          password: '',\n          // 不更新密码时发送空字符串\n          phone: this.profileForm.phone,\n          email: this.profileForm.email,\n          skillType: this.profileForm.skillType,\n          hourlyRate: parseFloat(this.profileForm.hourlyRate)\n        };\n        const response = await this.$axios.put(`/technicians/${this.user.id}`, updateData);\n        this.user = {\n          ...this.user,\n          ...response.data\n        };\n        this.profileForm = {\n          ...this.user\n        };\n        localStorage.setItem('user', JSON.stringify(this.user));\n        this.$emit('message', '个人资料更新成功', 'success');\n      } catch (error) {\n        console.error('更新资料失败:', error);\n        const errorMessage = error.response?.data?.message || error.message || '更新资料失败';\n        this.$emit('message', errorMessage, 'error');\n      }\n    },\n    logout() {\n      localStorage.removeItem('user');\n      localStorage.removeItem('userRole');\n      this.$router.push('/');\n    }\n  }\n};","map":{"version":3,"names":["name","data","user","activeTab","showUserMenu","taskFilter","allTasks","statistics","totalTasks","completedTasks","pendingTasks","averageRating","earnings","monthly","total","averagePerTask","profileForm","computed","filter","task","status","filteredTasks","created","loadUserInfo","loadData","methods","userData","localStorage","getItem","JSON","parse","Promise","all","loadTasks","loadStatistics","loadEarnings","error","console","$emit","id","description","vehiclePlate","startDate","estimatedCost","toggleUserMenu","getSkillTypeName","skillType","skillMap","getStatusText","statusMap","formatDate","dateString","Date","toLocaleDateString","calculateDuration","endDate","start","end","days","Math","ceil","startTask","completeTask","viewTask","viewTaskDetail","updateProfile","updateData","employeeId","username","password","phone","email","hourlyRate","parseFloat","response","$axios","put","setItem","stringify","errorMessage","message","logout","removeItem","$router","push"],"sources":["src/views/TechnicianDashboard.vue"],"sourcesContent":["<template>\n  <div class=\"technician-dashboard\">\n    <!-- 顶部导航栏 -->\n    <header class=\"dashboard-header\">\n      <div class=\"header-left\">\n        <div class=\"logo\">\n          <i class=\"fas fa-tools\"></i>\n          <span>技师工作台</span>\n        </div>\n        <nav class=\"nav-menu\">\n          <a href=\"#\" @click=\"activeTab = 'overview'\" :class=\"{ active: activeTab === 'overview' }\">\n            <i class=\"fas fa-home\"></i> 概览\n          </a>\n          <a href=\"#\" @click=\"activeTab = 'tasks'\" :class=\"{ active: activeTab === 'tasks' }\">\n            <i class=\"fas fa-tasks\"></i> 我的任务\n          </a>\n          <a href=\"#\" @click=\"activeTab = 'history'\" :class=\"{ active: activeTab === 'history' }\">\n            <i class=\"fas fa-history\"></i> 工作历史\n          </a>\n          <a href=\"#\" @click=\"activeTab = 'earnings'\" :class=\"{ active: activeTab === 'earnings' }\">\n            <i class=\"fas fa-dollar-sign\"></i> 收入统计\n          </a>\n        </nav>\n      </div>\n      <div class=\"header-right\">\n        <div class=\"user-menu\" @click=\"toggleUserMenu\">\n          <div class=\"user-avatar\">\n            <i class=\"fas fa-user-hard-hat\"></i>\n          </div>\n          <span class=\"user-name\">{{ user.name || user.username }}</span>\n          <i class=\"fas fa-chevron-down\"></i>\n        </div>\n        <div v-if=\"showUserMenu\" class=\"user-dropdown\">\n          <a href=\"#\" @click=\"activeTab = 'profile'\">\n            <i class=\"fas fa-user-edit\"></i> 个人资料\n          </a>\n          <a href=\"#\" @click=\"logout\">\n            <i class=\"fas fa-sign-out-alt\"></i> 登出\n          </a>\n        </div>\n      </div>\n    </header>\n\n    <!-- 主内容区域 -->\n    <main class=\"dashboard-main\">\n      <!-- 概览页面 -->\n      <div v-if=\"activeTab === 'overview'\" class=\"tab-content\">\n        <div class=\"welcome-section\">\n          <h1>欢迎回来，{{ user.name || user.username }}技师！</h1>\n          <div class=\"skill-badge\">\n            <i class=\"fas fa-award\"></i>\n            <span>{{ getSkillTypeName(user.skillType) }}</span>\n          </div>\n        </div>\n\n        <!-- 统计卡片 -->\n        <div class=\"stats-grid\">\n          <div class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background: linear-gradient(135deg, #f59e0b, #d97706);\">\n              <i class=\"fas fa-tasks\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>{{ statistics.totalTasks }}</h3>\n              <p>总任务数</p>\n            </div>\n          </div>\n          <div class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background: linear-gradient(135deg, #10b981, #059669);\">\n              <i class=\"fas fa-check-circle\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>{{ statistics.completedTasks }}</h3>\n              <p>已完成</p>\n            </div>\n          </div>\n          <div class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background: linear-gradient(135deg, #3b82f6, #2563eb);\">\n              <i class=\"fas fa-clock\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>{{ statistics.pendingTasks }}</h3>\n              <p>进行中</p>\n            </div>\n          </div>\n          <div class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background: linear-gradient(135deg, #8b5cf6, #7c3aed);\">\n              <i class=\"fas fa-star\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>{{ statistics.averageRating }}</h3>\n              <p>平均评分</p>\n            </div>\n          </div>\n        </div>\n\n        <!-- 技师信息卡片 -->\n        <div class=\"info-section\">\n          <div class=\"technician-card\">\n            <div class=\"tech-avatar\">\n              <i class=\"fas fa-user-hard-hat\"></i>\n            </div>\n            <div class=\"tech-info\">\n              <h3>{{ user.name }}</h3>\n              <p class=\"tech-id\">员工ID: {{ user.employeeId }}</p>\n              <div class=\"tech-details\">\n                <div class=\"detail-item\">\n                  <i class=\"fas fa-cogs\"></i>\n                  <span>{{ getSkillTypeName(user.skillType) }}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <i class=\"fas fa-dollar-sign\"></i>\n                  <span>¥{{ user.hourlyRate }}/小时</span>\n                </div>\n                <div class=\"detail-item\">\n                  <i class=\"fas fa-phone\"></i>\n                  <span>{{ user.phone }}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <i class=\"fas fa-envelope\"></i>\n                  <span>{{ user.email }}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"earnings-overview\">\n            <h3>收入概览</h3>\n            <div class=\"earnings-stats\">\n              <div class=\"earnings-item\">\n                <span class=\"earnings-label\">本月收入</span>\n                <span class=\"earnings-value\">¥{{ earnings.monthly }}</span>\n              </div>\n              <div class=\"earnings-item\">\n                <span class=\"earnings-label\">总收入</span>\n                <span class=\"earnings-value\">¥{{ earnings.total }}</span>\n              </div>\n            </div>\n            <button class=\"btn btn-outline\" @click=\"activeTab = 'earnings'\">\n              <i class=\"fas fa-chart-line\"></i> 查看详细\n            </button>\n          </div>\n        </div>\n\n        <!-- 待处理任务 -->\n        <div class=\"pending-tasks\">\n          <h2>待处理任务</h2>\n          <div class=\"task-list\">\n            <div v-if=\"pendingTasks.length === 0\" class=\"empty-state\">\n              <i class=\"fas fa-check-circle\"></i>\n              <p>暂无待处理任务</p>\n            </div>\n            <div v-for=\"task in pendingTasks.slice(0, 5)\" :key=\"task.id\" class=\"task-item\">\n              <div class=\"task-info\">\n                <h4>维修单 #{{ task.id }}</h4>\n                <p>{{ task.description }}</p>\n                <div class=\"task-meta\">\n                  <span class=\"task-date\">\n                    <i class=\"fas fa-calendar\"></i>\n                    {{ formatDate(task.startDate) }}\n                  </span>\n                  <span class=\"task-vehicle\">\n                    <i class=\"fas fa-car\"></i>\n                    {{ task.vehiclePlate }}\n                  </span>\n                </div>\n              </div>\n              <div class=\"task-actions\">\n                <span :class=\"['task-status', task.status.toLowerCase()]\">\n                  {{ getStatusText(task.status) }}\n                </span>\n                <button class=\"btn btn-primary btn-sm\" @click=\"viewTask(task)\">\n                  <i class=\"fas fa-eye\"></i> 查看\n                </button>\n              </div>\n            </div>\n          </div>\n          <button v-if=\"pendingTasks.length > 5\" class=\"btn btn-outline\" @click=\"activeTab = 'tasks'\">\n            查看全部任务\n          </button>\n        </div>\n      </div>\n\n      <!-- 任务管理页面 -->\n      <div v-if=\"activeTab === 'tasks'\" class=\"tab-content\">\n        <div class=\"section-header\">\n          <h2>我的任务</h2>\n          <div class=\"task-filters\">\n            <select v-model=\"taskFilter\" class=\"form-input\">\n              <option value=\"\">全部状态</option>\n              <option value=\"PENDING\">待处理</option>\n              <option value=\"IN_PROGRESS\">进行中</option>\n              <option value=\"COMPLETED\">已完成</option>\n            </select>\n          </div>\n        </div>\n\n        <div class=\"tasks-container\">\n          <div v-if=\"filteredTasks.length === 0\" class=\"empty-state\">\n            <i class=\"fas fa-tasks\"></i>\n            <h3>暂无任务</h3>\n            <p>等待系统分配新任务</p>\n          </div>\n          <div v-for=\"task in filteredTasks\" :key=\"task.id\" class=\"task-card\">\n            <div class=\"task-header\">\n              <div>\n                <h3>维修单 #{{ task.id }}</h3>\n                <p class=\"task-vehicle\">{{ task.vehiclePlate }}</p>\n              </div>\n              <span :class=\"['status-badge', task.status.toLowerCase()]\">\n                {{ getStatusText(task.status) }}\n              </span>\n            </div>\n            <div class=\"task-body\">\n              <p><strong>故障描述:</strong> {{ task.description }}</p>\n              <div class=\"task-timeline\">\n                <div class=\"timeline-item\">\n                  <i class=\"fas fa-play-circle\"></i>\n                  <span>开始: {{ formatDate(task.startDate) }}</span>\n                </div>\n                <div v-if=\"task.endDate\" class=\"timeline-item\">\n                  <i class=\"fas fa-stop-circle\"></i>\n                  <span>完成: {{ formatDate(task.endDate) }}</span>\n                </div>\n              </div>\n              <p><strong>预估费用:</strong> ¥{{ task.estimatedCost }}</p>\n            </div>\n            <div class=\"task-footer\">\n              <button v-if=\"task.status === 'PENDING'\" @click=\"startTask(task)\" class=\"btn btn-primary\">\n                <i class=\"fas fa-play\"></i> 开始任务\n              </button>\n              <button v-if=\"task.status === 'IN_PROGRESS'\" @click=\"completeTask(task)\" class=\"btn btn-success\">\n                <i class=\"fas fa-check\"></i> 完成任务\n              </button>\n              <button @click=\"viewTaskDetail(task)\" class=\"btn btn-outline\">\n                <i class=\"fas fa-eye\"></i> 查看详情\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 工作历史页面 -->\n      <div v-if=\"activeTab === 'history'\" class=\"tab-content\">\n        <div class=\"section-header\">\n          <h2>工作历史</h2>\n        </div>\n        \n        <div class=\"history-container\">\n          <div v-if=\"completedTasks.length === 0\" class=\"empty-state\">\n            <i class=\"fas fa-history\"></i>\n            <h3>暂无历史记录</h3>\n            <p>完成任务后将显示在这里</p>\n          </div>\n          <div v-for=\"task in completedTasks\" :key=\"task.id\" class=\"history-card\">\n            <div class=\"history-header\">\n              <div>\n                <h3>维修单 #{{ task.id }}</h3>\n                <p>{{ task.vehiclePlate }}</p>\n              </div>\n              <div class=\"completion-date\">\n                <i class=\"fas fa-check-circle\"></i>\n                {{ formatDate(task.endDate) }}\n              </div>\n            </div>\n            <div class=\"history-body\">\n              <p>{{ task.description }}</p>\n              <div class=\"history-metrics\">\n                <span class=\"metric\">\n                  <i class=\"fas fa-clock\"></i>\n                  耗时: {{ calculateDuration(task.startDate, task.endDate) }}\n                </span>\n                <span class=\"metric\">\n                  <i class=\"fas fa-dollar-sign\"></i>\n                  费用: ¥{{ task.actualCost || task.estimatedCost }}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 收入统计页面 -->\n      <div v-if=\"activeTab === 'earnings'\" class=\"tab-content\">\n        <div class=\"section-header\">\n          <h2>收入统计</h2>\n        </div>\n        \n        <div class=\"earnings-dashboard\">\n          <div class=\"earnings-summary\">\n            <div class=\"summary-card\">\n              <h3>本月收入</h3>\n              <div class=\"amount\">¥{{ earnings.monthly }}</div>\n              <div class=\"change positive\">\n                <i class=\"fas fa-arrow-up\"></i>\n                +12.5%\n              </div>\n            </div>\n            <div class=\"summary-card\">\n              <h3>平均每单</h3>\n              <div class=\"amount\">¥{{ earnings.averagePerTask }}</div>\n              <div class=\"change\">\n                <i class=\"fas fa-minus\"></i>\n                持平\n              </div>\n            </div>\n            <div class=\"summary-card\">\n              <h3>总收入</h3>\n              <div class=\"amount\">¥{{ earnings.total }}</div>\n              <div class=\"tasks-count\">{{ statistics.completedTasks }}个任务</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 个人资料页面 -->\n      <div v-if=\"activeTab === 'profile'\" class=\"tab-content\">\n        <div class=\"section-header\">\n          <h2>个人资料</h2>\n        </div>\n        \n        <div class=\"profile-container\">\n          <form @submit.prevent=\"updateProfile\" class=\"profile-form\">\n            <div class=\"form-group\">\n              <label class=\"form-label\">姓名</label>\n              <input v-model=\"profileForm.name\" class=\"form-input\" required>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"form-label\">员工ID</label>\n              <input v-model=\"profileForm.employeeId\" class=\"form-input\" disabled>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"form-label\">用户名</label>\n              <input v-model=\"profileForm.username\" class=\"form-input\" disabled>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"form-label\">电话</label>\n              <input v-model=\"profileForm.phone\" class=\"form-input\" required>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"form-label\">邮箱</label>\n              <input v-model=\"profileForm.email\" type=\"email\" class=\"form-input\" required>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"form-label\">技能类型</label>\n              <select v-model=\"profileForm.skillType\" class=\"form-input\" required>\n                <option value=\"MECHANIC\">机械维修</option>\n                <option value=\"ELECTRICIAN\">电气维修</option>\n                <option value=\"BODY_WORK\">车身维修</option>\n                <option value=\"PAINT\">喷漆</option>\n                <option value=\"DIAGNOSTIC\">诊断</option>\n              </select>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"form-label\">小时费率</label>\n              <input v-model=\"profileForm.hourlyRate\" type=\"number\" step=\"0.01\" class=\"form-input\" required>\n            </div>\n            <button type=\"submit\" class=\"btn btn-primary\">\n              <i class=\"fas fa-save\"></i> 保存更改\n            </button>\n          </form>\n        </div>\n      </div>\n    </main>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'TechnicianDashboard',\n  data() {\n    return {\n      user: {},\n      activeTab: 'overview',\n      showUserMenu: false,\n      taskFilter: '',\n      allTasks: [],\n      statistics: {\n        totalTasks: 0,\n        completedTasks: 0,\n        pendingTasks: 0,\n        averageRating: 0\n      },\n      earnings: {\n        monthly: 0,\n        total: 0,\n        averagePerTask: 0\n      },\n      profileForm: {}\n    }\n  },\n  computed: {\n    pendingTasks() {\n      return this.allTasks.filter(task => task.status === 'PENDING' || task.status === 'IN_PROGRESS');\n    },\n    completedTasks() {\n      return this.allTasks.filter(task => task.status === 'COMPLETED');\n    },\n    filteredTasks() {\n      if (!this.taskFilter) return this.allTasks;\n      return this.allTasks.filter(task => task.status === this.taskFilter);\n    }\n  },\n  created() {\n    this.loadUserInfo();\n    this.loadData();\n  },\n  methods: {\n    loadUserInfo() {\n      const userData = localStorage.getItem('user');\n      if (userData) {\n        this.user = JSON.parse(userData);\n        this.profileForm = { ...this.user };\n      }\n    },\n    async loadData() {\n      try {\n        await Promise.all([\n          this.loadTasks(),\n          this.loadStatistics(),\n          this.loadEarnings()\n        ]);\n      } catch (error) {\n        console.error('加载数据失败:', error);\n        this.$emit('message', '加载数据失败', 'error');\n      }\n    },\n    async loadTasks() {\n      // 模拟加载任务数据\n      this.allTasks = [\n        {\n          id: 1,\n          description: '发动机异响检修',\n          vehiclePlate: '京A12345',\n          status: 'PENDING',\n          startDate: '2024-12-20',\n          estimatedCost: 800\n        }\n      ];\n    },\n    async loadStatistics() {\n      this.statistics = {\n        totalTasks: 25,\n        completedTasks: 20,\n        pendingTasks: 3,\n        averageRating: 4.8\n      };\n    },\n    async loadEarnings() {\n      this.earnings = {\n        monthly: 8500,\n        total: 25600,\n        averagePerTask: 450\n      };\n    },\n    toggleUserMenu() {\n      this.showUserMenu = !this.showUserMenu;\n    },\n    getSkillTypeName(skillType) {\n      const skillMap = {\n        'MECHANIC': '机械维修',\n        'ELECTRICIAN': '电气维修',\n        'BODY_WORK': '车身维修',\n        'PAINT': '喷漆',\n        'DIAGNOSTIC': '诊断'\n      };\n      return skillMap[skillType] || skillType;\n    },\n    getStatusText(status) {\n      const statusMap = {\n        'PENDING': '待处理',\n        'IN_PROGRESS': '进行中',\n        'COMPLETED': '已完成',\n        'CANCELLED': '已取消'\n      };\n      return statusMap[status] || status;\n    },\n    formatDate(dateString) {\n      return new Date(dateString).toLocaleDateString('zh-CN');\n    },\n    calculateDuration(startDate, endDate) {\n      const start = new Date(startDate);\n      const end = new Date(endDate);\n      const days = Math.ceil((end - start) / (1000 * 60 * 60 * 24));\n      return `${days}天`;\n    },\n    startTask(task) {\n      this.$emit('message', '开始任务功能开发中', 'info');\n    },\n    completeTask(task) {\n      this.$emit('message', '完成任务功能开发中', 'info');\n    },\n    viewTask(task) {\n      this.$emit('message', '查看任务功能开发中', 'info');\n    },\n    viewTaskDetail(task) {\n      this.$emit('message', '查看详情功能开发中', 'info');\n    },\n    async updateProfile() {\n      try {\n        // 构建完整的技师更新请求数据\n        const updateData = {\n          name: this.profileForm.name,\n          employeeId: this.user.employeeId, // 保持原员工ID\n          username: this.user.username, // 保持原用户名\n          password: '', // 不更新密码时发送空字符串\n          phone: this.profileForm.phone,\n          email: this.profileForm.email,\n          skillType: this.profileForm.skillType,\n          hourlyRate: parseFloat(this.profileForm.hourlyRate)\n        };\n        \n        const response = await this.$axios.put(`/technicians/${this.user.id}`, updateData);\n        this.user = { ...this.user, ...response.data };\n        this.profileForm = { ...this.user };\n        localStorage.setItem('user', JSON.stringify(this.user));\n        this.$emit('message', '个人资料更新成功', 'success');\n      } catch (error) {\n        console.error('更新资料失败:', error);\n        const errorMessage = error.response?.data?.message || error.message || '更新资料失败';\n        this.$emit('message', errorMessage, 'error');\n      }\n    },\n    logout() {\n      localStorage.removeItem('user');\n      localStorage.removeItem('userRole');\n      this.$router.push('/');\n    }\n  }\n}\n</script>\n\n<style scoped>\n.technician-dashboard {\n  min-height: 100vh;\n  background: #f8fafc;\n}\n\n.dashboard-header {\n  background: white;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n  padding: 0 2rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: sticky;\n  top: 0;\n  z-index: 100;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  gap: 2rem;\n}\n\n.logo {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: #f59e0b;\n}\n\n.nav-menu {\n  display: flex;\n  gap: 1rem;\n}\n\n.nav-menu a {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 1rem;\n  text-decoration: none;\n  color: #6b7280;\n  transition: color 0.2s;\n  border-bottom: 3px solid transparent;\n}\n\n.nav-menu a:hover,\n.nav-menu a.active {\n  color: #f59e0b;\n  border-bottom-color: #f59e0b;\n}\n\n.header-right {\n  position: relative;\n}\n\n.user-menu {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  cursor: pointer;\n  border-radius: 0.5rem;\n  transition: background-color 0.2s;\n}\n\n.user-menu:hover {\n  background: #f3f4f6;\n}\n\n.user-avatar {\n  width: 2rem;\n  height: 2rem;\n  background: #f59e0b;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n}\n\n.user-dropdown {\n  position: absolute;\n  top: 100%;\n  right: 0;\n  background: white;\n  border-radius: 0.5rem;\n  box-shadow: 0 10px 25px rgba(0,0,0,0.1);\n  min-width: 200px;\n  z-index: 1000;\n}\n\n.user-dropdown a {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1rem;\n  text-decoration: none;\n  color: #374151;\n  transition: background-color 0.2s;\n}\n\n.user-dropdown a:hover {\n  background: #f3f4f6;\n}\n\n.dashboard-main {\n  padding: 2rem;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.tab-content {\n  animation: fadeIn 0.3s ease;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(10px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.welcome-section {\n  text-align: center;\n  margin-bottom: 2rem;\n}\n\n.welcome-section h1 {\n  font-size: 2rem;\n  color: #1f2937;\n  margin-bottom: 1rem;\n}\n\n.skill-badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  background: linear-gradient(135deg, #f59e0b, #d97706);\n  color: white;\n  border-radius: 9999px;\n  font-weight: 500;\n}\n\n.stats-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 1.5rem;\n  margin-bottom: 2rem;\n}\n\n.stat-card {\n  background: white;\n  padding: 1.5rem;\n  border-radius: 1rem;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.05);\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.stat-icon {\n  width: 3rem;\n  height: 3rem;\n  border-radius: 0.75rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 1.25rem;\n}\n\n.stat-content h3 {\n  font-size: 1.5rem;\n  font-weight: 700;\n  margin: 0;\n  color: #1f2937;\n}\n\n.stat-content p {\n  margin: 0;\n  color: #6b7280;\n  font-size: 0.875rem;\n}\n\n.info-section {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1.5rem;\n  margin-bottom: 2rem;\n}\n\n.technician-card {\n  background: white;\n  padding: 1.5rem;\n  border-radius: 1rem;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.05);\n  display: flex;\n  gap: 1rem;\n}\n\n.tech-avatar {\n  width: 4rem;\n  height: 4rem;\n  background: linear-gradient(135deg, #f59e0b, #d97706);\n  border-radius: 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 1.5rem;\n}\n\n.tech-info h3 {\n  margin: 0 0 0.5rem 0;\n  color: #1f2937;\n}\n\n.tech-id {\n  color: #6b7280;\n  font-size: 0.875rem;\n  margin-bottom: 1rem;\n}\n\n.tech-details {\n  display: grid;\n  gap: 0.5rem;\n}\n\n.detail-item {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  color: #374151;\n}\n\n.detail-item i {\n  color: #f59e0b;\n  width: 1rem;\n}\n\n.earnings-overview {\n  background: white;\n  padding: 1.5rem;\n  border-radius: 1rem;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.05);\n}\n\n.earnings-overview h3 {\n  margin: 0 0 1rem 0;\n  color: #1f2937;\n}\n\n.earnings-stats {\n  margin-bottom: 1rem;\n}\n\n.earnings-item {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 0.5rem;\n}\n\n.earnings-label {\n  color: #6b7280;\n  font-size: 0.875rem;\n}\n\n.earnings-value {\n  font-weight: 600;\n  color: #1f2937;\n}\n\n.pending-tasks {\n  margin-bottom: 2rem;\n}\n\n.pending-tasks h2 {\n  margin-bottom: 1rem;\n  color: #1f2937;\n}\n\n.task-list {\n  background: white;\n  border-radius: 1rem;\n  padding: 1.5rem;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.05);\n  margin-bottom: 1rem;\n}\n\n.task-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 0;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.task-item:last-child {\n  border-bottom: none;\n}\n\n.task-info h4 {\n  margin: 0 0 0.25rem 0;\n  color: #1f2937;\n}\n\n.task-info p {\n  margin: 0 0 0.5rem 0;\n  color: #6b7280;\n  font-size: 0.875rem;\n}\n\n.task-meta {\n  display: flex;\n  gap: 1rem;\n  font-size: 0.75rem;\n  color: #9ca3af;\n}\n\n.task-actions {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.task-status {\n  padding: 0.25rem 0.75rem;\n  border-radius: 9999px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  text-transform: uppercase;\n}\n\n.task-status.pending {\n  background: #fef3c7;\n  color: #d97706;\n}\n\n.task-status.in_progress {\n  background: #dbeafe;\n  color: #2563eb;\n}\n\n.task-status.completed {\n  background: #d1fae5;\n  color: #059669;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1.5rem;\n}\n\n.section-header h2 {\n  font-size: 1.5rem;\n  color: #1f2937;\n  margin: 0;\n}\n\n.task-filters {\n  display: flex;\n  gap: 1rem;\n}\n\n.tasks-container,\n.history-container {\n  display: grid;\n  gap: 1.5rem;\n}\n\n.task-card,\n.history-card {\n  background: white;\n  padding: 1.5rem;\n  border-radius: 1rem;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.05);\n}\n\n.task-header,\n.history-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n}\n\n.status-badge {\n  padding: 0.5rem 1rem;\n  border-radius: 9999px;\n  font-size: 0.875rem;\n  font-weight: 500;\n}\n\n.task-timeline {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  margin: 1rem 0;\n}\n\n.timeline-item {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  color: #6b7280;\n}\n\n.timeline-item i {\n  color: #f59e0b;\n}\n\n.task-footer {\n  display: flex;\n  gap: 1rem;\n  margin-top: 1rem;\n}\n\n.btn-sm {\n  padding: 0.5rem 1rem;\n  font-size: 0.875rem;\n}\n\n.history-metrics {\n  display: flex;\n  gap: 1rem;\n  margin-top: 0.5rem;\n}\n\n.metric {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  font-size: 0.875rem;\n  color: #6b7280;\n}\n\n.metric i {\n  color: #f59e0b;\n}\n\n.earnings-dashboard {\n  max-width: 800px;\n}\n\n.earnings-summary {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 1.5rem;\n  margin-bottom: 2rem;\n}\n\n.summary-card {\n  background: white;\n  padding: 1.5rem;\n  border-radius: 1rem;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.05);\n  text-align: center;\n}\n\n.summary-card h3 {\n  margin: 0 0 1rem 0;\n  color: #6b7280;\n  font-size: 0.875rem;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n\n.amount {\n  font-size: 2rem;\n  font-weight: 700;\n  color: #1f2937;\n  margin-bottom: 0.5rem;\n}\n\n.change {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.25rem;\n  font-size: 0.875rem;\n  color: #6b7280;\n}\n\n.change.positive {\n  color: #059669;\n}\n\n.tasks-count {\n  font-size: 0.875rem;\n  color: #6b7280;\n}\n\n.profile-container {\n  max-width: 600px;\n}\n\n.profile-form {\n  background: white;\n  padding: 2rem;\n  border-radius: 1rem;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.05);\n}\n\n.empty-state {\n  text-align: center;\n  padding: 3rem 1rem;\n  color: #6b7280;\n}\n\n.empty-state i {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n  opacity: 0.5;\n}\n\n.empty-state h3 {\n  margin-bottom: 0.5rem;\n  color: #374151;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .dashboard-header {\n    padding: 0 1rem;\n    flex-direction: column;\n    gap: 1rem;\n  }\n  \n  .header-left {\n    flex-direction: column;\n    gap: 1rem;\n  }\n  \n  .nav-menu {\n    overflow-x: auto;\n  }\n  \n  .dashboard-main {\n    padding: 1rem;\n  }\n  \n  .stats-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .info-section {\n    grid-template-columns: 1fr;\n  }\n  \n  .section-header {\n    flex-direction: column;\n    gap: 1rem;\n    align-items: stretch;\n  }\n  \n  .task-item {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 1rem;\n  }\n  \n  .task-actions {\n    justify-content: space-between;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}